{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "PrePromptSubmission Configuration Schema",
  "type": "object",
  "properties": {
    "prePromptSubmission": {
      "type": "object",
      "description": "Configuration for pre-prompt submission pattern matching and context injection",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false,
          "description": "Enable/disable pre-prompt submission processing"
        },
        "processingOrder": {
          "type": "string",
          "enum": ["First", "All", "Priority"],
          "default": "All",
          "description": "How to handle multiple pattern matches"
        },
        "patterns": {
          "type": "array",
          "description": "List of pattern rules for matching and context injection",
          "items": {
            "$ref": "#/definitions/PatternRule"
          },
          "maxItems": 50
        }
      },
      "additionalProperties": false,
      "required": ["enabled"]
    }
  },
  "definitions": {
    "PatternRule": {
      "type": "object",
      "description": "A pattern-prompt pair for conditional context injection",
      "properties": {
        "pattern": {
          "type": "string",
          "minLength": 1,
          "description": "Regex or glob pattern to match against user prompts"
        },
        "patternType": {
          "type": "string",
          "enum": ["regex", "glob"],
          "default": "regex",
          "description": "Type of pattern matching to use"
        },
        "prompt": {
          "type": "string",
          "minLength": 1,
          "description": "Context content to inject, supports @ file references"
        },
        "description": {
          "type": "string",
          "minLength": 1,
          "description": "Human-readable description of the rule's purpose"
        },
        "priority": {
          "type": "integer",
          "minimum": 1,
          "maximum": 100,
          "description": "Priority when processingOrder is 'Priority' (1 = highest)"
        }
      },
      "additionalProperties": false,
      "required": ["pattern", "prompt", "description"]
    }
  }
}